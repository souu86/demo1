<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI協働瞑想システム - Windows Desktop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Noto Serif JP', 'STSong', 'SimSun', serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Windows桌面 */
        .windows-desktop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            z-index: 1;
        }

        /* 桌面图标 */
        .desktop-icons {
            position: absolute;
            top: 20px;
            left: 20px;
            display: grid;
            gap: 20px;
        }

        .desktop-icon {
            width: 70px;
            text-align: center;
            color: white;
            font-size: 0.75em;
            cursor: pointer;
            padding: 5px;
            border-radius: 2px;
            transition: background 0.2s;
        }

        .desktop-icon:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .icon-img {
            width: 40px;
            height: 40px;
            margin: 0 auto 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* 任务栏 */
        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 48px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            padding: 0 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .start-button {
            width: 48px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            cursor: pointer;
            color: white;
            font-size: 18px;
        }

        .start-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .taskbar-app {
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            display: flex;
            align-items: center;
            padding: 0 12px;
            margin-right: 10px;
            cursor: pointer;
            color: white;
            font-size: 14px;
            gap: 8px;
            transition: background 0.2s;
        }

        .taskbar-app:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .taskbar-app.active {
            background: rgba(255, 255, 255, 0.3);
            border-bottom: 2px solid #0078d4;
        }

        .taskbar-time {
            margin-left: auto;
            color: white;
            font-size: 12px;
            text-align: right;
            line-height: 1.2;
        }

        /* 应用窗口 */
        .app-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            height: 85%;
            max-width: 800px;
            max-height: 650px;
            background: #f0f0f0;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            z-index: 100;
        }

        .app-window.active {
            display: flex;
        }

        /* 标题栏 */
        .window-titlebar {
            height: 32px;
            background: linear-gradient(to bottom, #e8e8e8, #d0d0d0);
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            padding: 0 12px;
            border-bottom: 1px solid #c0c0c0;
            cursor: move;
            user-select: none;
        }

        .window-titlebar:active {
            cursor: grabbing;
        }

        .window-title {
            flex: 1;
            font-size: 12px;
            color: #333;
            font-weight: 400;
        }

        .window-controls {
            display: flex;
            gap: 2px;
        }

        .window-control {
            width: 16px;
            height: 14px;
            border: 1px solid #999;
            background: linear-gradient(to bottom, #f0f0f0, #d8d8d8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: #333;
        }

        .window-control:hover {
            background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
        }

        .window-minimize::after {
            content: '−';
        }

        .window-maximize::after {
            content: '□';
        }

        .window-close {
            background: linear-gradient(to bottom, #ff6b6b, #ff5252);
            color: white;
        }

        .window-close::after {
            content: '×';
        }

        .window-control.disabled {
            background: linear-gradient(to bottom, #e0e0e0, #c0c0c0);
            color: #999;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .window-control.disabled:hover {
            background: linear-gradient(to bottom, #e0e0e0, #c0c0c0);
        }

        /* 应用内容 */
        .app-content {
            flex: 1;
            background: white;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .container {
            flex: 1;
            padding: 20px 30px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.95);
        }

        /* 自定义滚动条 */
        .container::-webkit-scrollbar {
            width: 6px;
        }

        .container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.02);
        }

        .container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .screen {
            display: none;
            animation: fadeIn 0.8s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 2.8em;
            color: #1a1a1a;
            margin-bottom: 10px;
            text-align: center;
            font-weight: 300;
            letter-spacing: 0.1em;
        }

        h2 {
            font-size: 2em;
            color: #2a2a2a;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 300;
            letter-spacing: 0.05em;
        }

        p {
            color: #4a4a4a;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            font-weight: 300;
        }

        /* 语言选择器 - 极简风格 */
        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 0;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            padding: 2px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .lang-btn {
            padding: 6px 16px;
            border: none;
            background: transparent;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 0.9em;
            color: #666;
            font-family: inherit;
        }

        .lang-btn:hover {
            color: #333;
        }

        .lang-btn.active {
            background: #1a1a1a;
            color: white;
        }

        /* 任务选择 - 水墨卡片 */
        .task-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .task-card {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 2px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.5s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .task-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .task-card:hover::before {
            transform: translateX(100%);
        }

        .task-card:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .task-card.selected {
            background: rgba(0, 0, 0, 0.03);
            border-color: rgba(0, 0, 0, 0.2);
        }

        .task-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            opacity: 0.7;
        }

        .task-name {
            font-size: 1.2em;
            color: #2a2a2a;
            margin-bottom: 8px;
            font-weight: 300;
        }

        .task-duration {
            font-size: 0.9em;
            color: #666;
            font-weight: 300;
        }

        /* 返回按钮 */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
        }

        .back-button:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: translateX(-2px);
        }

        /* 下一页按钮 */
        .next-button {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
        }

        .next-button:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: translateX(2px);
        }

        /* 极简按钮 */
        .btn {
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 2px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.4s ease;
            display: inline-block;
            margin: 30px auto;
            font-family: inherit;
            font-weight: 300;
            letter-spacing: 0.05em;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.15);
        }

        .btn.secondary {
            background: transparent;
            color: #1a1a1a;
            border: 1px solid #1a1a1a;
        }

        .btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* 流程说明 */
        .flow-section {
            margin-top: 50px;
            padding-top: 40px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        .flow-list {
            list-style: none;
            padding: 0;
            margin: 30px 0;
        }

        .flow-list li {
            padding: 15px 0;
            color: #4a4a4a;
            position: relative;
            padding-left: 30px;
            font-weight: 300;
            line-height: 1.6;
        }

        .flow-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: #1a1a1a;
            border-radius: 50%;
            opacity: 0.3;
        }

        /* 冥想界面 - 极简禅意 */
        .meditation-container {
            text-align: center;
            padding: 40px;
        }

        /* Windows风格进度条 */
        .windows-progress-container {
            margin: 30px auto;
            width: 400px;
            max-width: 90%;
        }

        .countdown-display {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.2em;
            color: #1a1a1a;
            font-weight: 300;
            letter-spacing: 0.05em;
        }

        .countdown-total {
            font-size: 0.5em;
            color: #666;
            display: block;
            margin-top: 5px;
        }

        .windows-progress-bar {
            position: relative;
            width: 100%;
            height: 24px;
            background: #f0f0f0;
            border: 2px inset #d4d0c8;
            border-radius: 0;
            overflow: hidden;
            box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to bottom, #0078d4 0%, #106ebe 50%, #005a9e 51%, #004578 100%);
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.3), transparent);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 11px;
            color: #333;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.8);
            z-index: 2;
        }

        .breath-circle {
            width: 180px;
            height: 180px;
            margin: 40px auto;
            background: radial-gradient(circle, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0));
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: breathe 4s ease-in-out infinite;
            position: relative;
        }

        @keyframes breathe {

            0%,
            100% {
                transform: scale(1);
                border-color: rgba(0, 0, 0, 0.1);
            }

            50% {
                transform: scale(1.15);
                border-color: rgba(0, 0, 0, 0.2);
            }
        }

        .breath-text {
            color: #2a2a2a;
            font-size: 1.1em;
            font-weight: 300;
            letter-spacing: 0.1em;
        }

        /* 评估清单 - 水墨风格 */
        .checklist {
            margin: 30px 0;
        }

        .checklist-item {
            padding: 20px;
            margin: 15px 0;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: flex-start;
        }

        .checklist-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateX(5px);
        }

        .checklist-item.checked {
            background: rgba(0, 0, 0, 0.03);
        }

        .check-circle {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0, 0, 0, 0.3);
            border-radius: 3px;
            margin-right: 20px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
            background: white;
            font-size: 14px;
        }

        .checklist-item.checked .check-circle {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }

        .checklist-item.checked .check-circle::after {
            content: '✓';
            font-weight: bold;
        }

        .checklist-text {
            flex: 1;
            text-align: left;
        }

        .checklist-title {
            font-size: 1.05em;
            color: #2a2a2a;
            margin-bottom: 5px;
            font-weight: 400;
        }

        .checklist-desc {
            font-size: 0.9em;
            color: #666;
            font-weight: 300;
            line-height: 1.5;
        }

        /* 确认界面 */
        .confirmation {
            text-align: center;
            padding: 60px 40px;
        }

        .space-hint {
            display: inline-block;
            padding: 15px 30px;
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 2px;
            margin-top: 40px;
            color: #4a4a4a;
            font-size: 1em;
            font-weight: 300;
            letter-spacing: 0.05em;
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }
        }

        .hold-progress {
            width: 300px;
            height: 30px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 15px;
            margin: 40px auto;
            overflow: hidden;
            display: none;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hold-progress.active {
            display: block;
        }

        .hold-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            border-radius: 13px;
            width: 0%;
            transition: width 5s linear;
            position: relative;
            overflow: hidden;
        }

        .hold-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.3), transparent);
            border-radius: 13px 13px 0 0;
        }

        .hold-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        /* 完成对话框 - Windows风格 */
        .completion-dialog {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 480px;
            background: #f0f0f0;
            border: 2px outset #d4d0c8;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 200;
            display: none;
        }

        .completion-dialog.active {
            display: block;
        }

        .dialog-titlebar {
            height: 24px;
            background: linear-gradient(to bottom, #0078d4, #005a9e);
            color: white;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 11px;
            font-weight: bold;
        }

        .dialog-titlebar .title {
            flex: 1;
        }

        .dialog-close {
            width: 16px;
            height: 14px;
            background: linear-gradient(to bottom, #ff6b6b, #ff5252);
            border: 1px outset #ff6b6b;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .dialog-close:hover {
            background: linear-gradient(to bottom, #ff8a80, #ff6b6b);
        }

        /* 任务处理窗口 */
        .task-window {
            position: absolute;
            top: 10%;
            right: 5%;
            width: 400px;
            height: 300px;
            background: #f0f0f0;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            z-index: 90;
        }

        .task-window.active {
            display: flex;
        }

        .task-window .window-titlebar {
            background: linear-gradient(to bottom, #0078d4, #005a9e);
            color: white;
        }

        .task-content {
            flex: 1;
            padding: 20px;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .task-animation {
            font-size: 48px;
            margin-bottom: 20px;
            animation: taskPulse 2s ease-in-out infinite;
        }

        @keyframes taskPulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.8;
            }

            50% {
                transform: scale(1.1);
                opacity: 1;
            }
        }

        .task-progress {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .task-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0078d4, #00bcf2);
            width: 0%;
            transition: width 0.3s ease;
            animation: progressShimmer 2s infinite;
        }

        @keyframes progressShimmer {
            0% {
                background-position: -200px 0;
            }

            100% {
                background-position: 200px 0;
            }
        }

        .task-status {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }

        .task-result {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .task-result.active {
            display: block;
        }

        .result-icon {
            font-size: 64px;
            margin-bottom: 20px;
            color: #4CAF50;
        }

        .result-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .result-description {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .dialog-content h3 {
            color: #1a1a1a;
            font-size: 1.6em;
            margin-bottom: 20px;
            font-weight: 300;
            text-align: center;
        }

        .value-points {
            list-style: none;
            padding: 0;
            margin: 30px 0;
        }

        .value-points li {
            padding: 10px 0;
            color: #4a4a4a;
            font-size: 0.95em;
            display: flex;
            align-items: flex-start;
            font-weight: 300;
            line-height: 1.5;
        }

        .value-points li::before {
            content: '✓';
            margin-right: 12px;
            color: #4CAF50;
            font-weight: bold;
            flex-shrink: 0;
        }

        .dialog-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                width: 95%;
                padding: 30px 20px;
            }

            .task-grid {
                grid-template-columns: 1fr;
            }

            .completion-dialog {
                width: 90%;
                padding: 30px 20px;
            }

            .windows-progress-container {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <!-- Windows桌面 -->
    <div class="windows-desktop">
        <!-- 桌面图标 -->
        <div class="desktop-icons">
            <div class="desktop-icon" ondblclick="openApp()">
                <div class="icon-img">🧘</div>
                <div>AI Meditation</div>
            </div>
            <div class="desktop-icon">
                <div class="icon-img">💻</div>
                <div>This PC</div>
            </div>
            <div class="desktop-icon">
                <div class="icon-img">📁</div>
                <div>Documents</div>
            </div>
            <div class="desktop-icon">
                <div class="icon-img">🗑️</div>
                <div>Recycle Bin</div>
            </div>
        </div>

        <!-- 任务栏 -->
        <div class="taskbar">
            <div class="start-button">⊞</div>
            <div class="taskbar-app active" id="taskbar-app" style="display: none;" onclick="focusApp()">
                <span>🧘</span>
                <span>AI Meditation System</span>
            </div>
            <div class="taskbar-app" id="taskbar-task" style="display: none;" onclick="focusTaskWindow()">
                <span id="taskbar-task-icon">📧</span>
                <span id="taskbar-task-name">Email Processing</span>
            </div>
            <div class="taskbar-time" id="taskbar-time"></div>
        </div>
    </div>

    <!-- 应用窗口 -->
    <div class="app-window" id="app-window">
        <!-- 标题栏 -->
        <div class="window-titlebar">
            <div class="window-title">AI協働瞑想システム - Meditation.exe</div>
            <div class="window-controls">
                <div class="window-control window-minimize" onclick="minimizeApp()"></div>
                <div class="window-control window-maximize" onclick="maximizeApp()"></div>
                <div class="window-control window-close" onclick="closeApp()"></div>
            </div>
        </div>

        <!-- 应用内容 -->
        <div class="app-content">
            <div class="container" id="main-container">
                <!-- 欢迎界面 -->
                <div class="screen active" id="welcome">
                    <div class="language-selector">
                        <button class="lang-btn active" onclick="changeLanguage('ja')">日本語</button>
                        <button class="lang-btn" onclick="changeLanguage('en')">English</button>
                        <button class="lang-btn" onclick="changeLanguage('zh')">中文</button>
                    </div>

                    <h1 id="main-title">AI協働瞑想システム</h1>
                    <p id="main-subtitle">待ち時間を回復時間に変える</p>

                    <h2 id="task-title" style="margin-top: 50px; font-size: 1.3em;">作業を選択してください</h2>
                    <div class="task-grid">
                        <div class="task-card" onclick="selectTask('email')">
                            <div class="task-icon">✉</div>
                            <div class="task-name" data-i18n="task-email">メール作成</div>
                            <div class="task-duration" data-i18n="task-email-duration">瞑想: 2-3分</div>
                        </div>
                        <div class="task-card" onclick="selectTask('report')">
                            <div class="task-icon">📋</div>
                            <div class="task-name" data-i18n="task-report">レポート作成</div>
                            <div class="task-duration" data-i18n="task-report-duration">瞑想: 5-7分</div>
                        </div>
                        <div class="task-card" onclick="selectTask('code')">
                            <div class="task-icon">⚙</div>
                            <div class="task-name" data-i18n="task-code">コード生成</div>
                            <div class="task-duration" data-i18n="task-code-duration">瞑想: 3-5分</div>
                        </div>
                        <div class="task-card" onclick="selectTask('analysis')">
                            <div class="task-icon">📊</div>
                            <div class="task-name" data-i18n="task-analysis">データ分析</div>
                            <div class="task-duration" data-i18n="task-analysis-duration">瞑想: 4-6分</div>
                        </div>
                    </div>
                </div>

                <!-- 流程说明界面 -->
                <div class="screen" id="flow-screen">
                    <div class="back-button" onclick="goBack()">←</div>
                    <div class="next-button" onclick="startDemo()">→</div>
                    <h1 id="flow-title">体験フロー</h1>
                    <p id="selected-task-display" style="font-size: 1.2em; margin: 30px 0;"></p>

                    <ul class="flow-list" id="feature-list">
                        <li>AIがタスクの処理を開始</li>
                        <li>適切な瞑想でデジタル疲労と戦う</li>
                        <li>「受動的受信」から「能動的評価」へ</li>
                        <li>物理的確認で注意力を回復</li>
                    </ul>

                    <div style="text-align: center;">
                        <button class="btn" id="start-btn" onclick="startDemo()">体験を開始</button>
                    </div>
                </div>

                <!-- 冥想界面 -->
                <div class="screen" id="meditation">
                    <div class="back-button" onclick="goBack()">←</div>
                    <div class="next-button" onclick="finishMeditation()">→</div>
                    <div class="meditation-container">
                        <h2 id="meditation-title">呼吸エクササイズ</h2>

                        <!-- Windows风格进度条 -->
                        <div class="windows-progress-container">
                            <div class="countdown-display">
                                <span id="countdown-current">0秒</span>
                                <span class="countdown-total" id="countdown-total">/ 3分</span>
                            </div>
                            <div class="windows-progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                                <div class="progress-text" id="progress-percent">0%</div>
                            </div>
                        </div>

                        <div class="breath-circle">
                            <span class="breath-text" id="breath-text">吸って...</span>
                        </div>

                        <p id="meditation-guide" style="margin-top: 25px;">呼吸に意識を向けて、円のリズムに従って...</p>
                    </div>
                </div>

                <!-- 评估清单 -->
                <div class="screen" id="evaluation">
                    <div class="back-button" onclick="goBack()">←</div>
                    <div class="next-button" onclick="proceedToComplete()">→</div>
                    <h2 id="evaluation-title">評価の準備</h2>
                    <p id="evaluation-subtitle">AIがタスクを完了しました。新しい視点で結果を確認してください</p>

                    <div class="checklist" id="checklist-container">
                        <!-- 动态生成的检查项 -->
                    </div>

                    <div style="text-align: center;">
                        <button class="btn" id="continue-btn" onclick="proceedToComplete()">続ける</button>
                    </div>
                </div>


            </div>
        </div>
    </div>

    <!-- 任务处理窗口 -->
    <div class="task-window" id="task-window">
        <div class="window-titlebar">
            <div class="window-title" id="task-window-title">AI Task Processing</div>
            <div class="window-controls">
                <div class="window-control window-minimize" onclick="minimizeTaskWindow()"></div>
                <div class="window-control window-maximize disabled"></div>
                <div class="window-control window-close" onclick="closeTaskWindow()"></div>
            </div>
        </div>
        <div class="task-content">
            <div class="task-animation" id="task-animation">📧</div>
            <div class="task-progress">
                <div class="task-progress-bar" id="task-progress-bar"></div>
            </div>
            <div class="task-status" id="task-status">Processing your request...</div>

            <div class="task-result" id="task-result">
                <div class="result-icon">✅</div>
                <div class="result-title" id="result-title">Task Completed</div>
                <div class="result-description" id="result-description">Your email has been successfully generated and
                    is ready for review.</div>
            </div>
        </div>
    </div>

    <!-- 完成对话框 -->
    <div class="completion-dialog" id="completion-dialog">
        <div class="dialog-titlebar">
            <div class="title">AI協働瞑想システム - 完了</div>
            <div class="dialog-close" onclick="location.reload()">×</div>
        </div>
        <div class="dialog-content">
            <h3 id="complete-title" style="margin: 20px; text-align: center; color: #333;">体験完了</h3>
            <p id="complete-subtitle" style="text-align: center; margin: 0 20px 20px; color: #666; font-size: 14px;">
                AI協働瞑想の完全なフローを体験しました</p>

            <ul class="value-points" id="value-list" style="margin: 20px; list-style: none; padding: 0;">
                <li style="padding: 8px 0; color: #333; font-size: 13px; display: flex; align-items: flex-start;">
                    <span style="color: #4CAF50; margin-right: 8px;">✓</span>
                    デジタル疲労と戦い、必要な回復時間を作る
                </li>
                <li style="padding: 8px 0; color: #333; font-size: 13px; display: flex; align-items: flex-start;">
                    <span style="color: #4CAF50; margin-right: 8px;">✓</span>
                    判断の質を向上させ、エラーと手戻りを削減
                </li>
                <li style="padding: 8px 0; color: #333; font-size: 13px; display: flex; align-items: flex-start;">
                    <span style="color: #4CAF50; margin-right: 8px;">✓</span>
                    認知リソースを保護し、一日中集中力を維持
                </li>
                <li style="padding: 8px 0; color: #333; font-size: 13px; display: flex; align-items: flex-start;">
                    <span style="color: #4CAF50; margin-right: 8px;">✓</span>
                    AIツールを代替品から真のコラボレーションパートナーへ
                </li>
            </ul>

            <div style="text-align: center; margin: 20px;">
                <button onclick="confirmAndShowTask()" id="restart-btn"
                    style="background: #0078d4; color: white; border: 1px outset #0078d4; padding: 8px 20px; cursor: pointer; font-size: 12px;">確認</button>
            </div>
        </div>
    </div>

    <script>
        // 多语言支持
        const translations = {
            ja: {
                'main-title': 'AI協働瞑想システム',
                'main-subtitle': '待ち時間を回復時間に変える',
                'task-title': '作業を選択してください',
                'task-email': 'メール作成',
                'task-email-duration': '瞑想: 3分',
                'task-report': 'レポート作成',
                'task-report-duration': '瞑想: 6分',
                'task-code': 'コード生成',
                'task-code-duration': '瞑想: 5分',
                'task-analysis': 'データ分析',
                'task-analysis-duration': '瞑想: 10分',
                'flow-title': '体験フロー',
                'selected-task': '選択されたタスク',
                'feature-list': [
                    'AIがタスクの処理を開始',
                    '適切な瞑想でデジタル疲労と戦う',
                    '「受動的受信」から「能動的評価」へ',
                    '物理的確認で注意力を回復'
                ],
                'start-btn': '体験を開始',
                'meditation-title': '呼吸エクササイズ',
                'breath-inhale': '吸って...',
                'breath-hold': '保持...',
                'breath-exhale': '吐いて...',
                'meditation-guides': [
                    '呼吸に意識を向けて、円のリズムに従って...',
                    '肩に注意を向けて、そっと下ろして...',
                    '思考が浮かんだら、優しく気づいて...',
                    '椅子との接触点を感じて...',
                    'AIの成果を新しい視点で見る準備...'
                ],
                'evaluation-title': '評価の準備',
                'evaluation-subtitle': 'AIがタスクを完了しました。新しい視点で結果を確認してください',
                'continue-btn': '続ける',
                'complete-title': '体験完了',
                'complete-subtitle': 'AI協働瞑想の完全なフローを体験しました',
                'value-list': [
                    'デジタル疲労と戦い、必要な回復時間を作る',
                    '判断の質を向上させ、エラーと手戻りを削減',
                    '認知リソースを保護し、一日中集中力を維持',
                    'AIツールを代替品から真のコラボレーションパートナーへ'
                ],
                'restart-btn': '確認',
                'checklist': {
                    email: [
                        { title: '意図とコンテンツの整合性', desc: 'このメールは私が伝えたいコアメッセージを正確に伝えていますか？' },
                        { title: 'トーンと受信者のマッチング', desc: '言葉遣いとトーンは受信者の立場と私たちの関係に適していますか？' },
                        { title: '重要情報の完全性', desc: 'すべての必要な情報が含まれ、不適切な内容はありませんか？' }
                    ],
                    report: [
                        { title: 'データの正確性と完全性', desc: 'すべての数値とグラフは正確で最新ですか？' },
                        { title: '論理構造と説得力', desc: '議論の流れは論理的で、結論は十分にサポートされていますか？' },
                        { title: 'エグゼクティブサマリーの明確さ', desc: '主要な洞察と推奨事項は明確に伝わりますか？' }
                    ],
                    code: [
                        { title: 'コードの品質と保守性', desc: 'コードは読みやすく、適切にコメントされていますか？' },
                        { title: 'エラー処理とエッジケース', desc: 'すべての潜在的なエラーとエッジケースが処理されていますか？' },
                        { title: 'パフォーマンスとセキュリティ', desc: 'コードは効率的で、セキュリティのベストプラクティスに従っていますか？' }
                    ],
                    analysis: [
                        { title: 'データソースの信頼性', desc: '使用されたデータソースは信頼でき、適切ですか？' },
                        { title: '分析手法の適切性', desc: '選択された分析手法は問題に適していますか？' },
                        { title: '洞察の実用性', desc: '得られた洞察は実行可能で価値がありますか？' }
                    ]
                }
            },
            en: {
                'main-title': 'AI Collaboration Meditation System',
                'main-subtitle': 'Transform waiting time into recovery time',
                'task-title': 'Select your task',
                'task-email': 'Email Drafting',
                'task-email-duration': 'Meditation: 3 min',
                'task-report': 'Report Creation',
                'task-report-duration': 'Meditation: 6 min',
                'task-code': 'Code Generation',
                'task-code-duration': 'Meditation: 5 min',
                'task-analysis': 'Data Analysis',
                'task-analysis-duration': 'Meditation: 10 min',
                'flow-title': 'Experience Flow',
                'selected-task': 'Selected Task',
                'feature-list': [
                    'AI begins processing your task',
                    'Combat digital fatigue with guided meditation',
                    'Shift from "passive receiver" to "active evaluator"',
                    'Physical confirmation reinforces attention return'
                ],
                'start-btn': 'Start Experience',
                'meditation-title': 'Breathing Exercise',
                'breath-inhale': 'Inhale...',
                'breath-hold': 'Hold...',
                'breath-exhale': 'Exhale...',
                'meditation-guides': [
                    'Focus on your breath, following the rhythm of the circle...',
                    'Notice your shoulders, let them gently drop...',
                    'If thoughts arise, gently acknowledge them...',
                    'Feel the contact points with your chair...',
                    'Prepare to see AI\'s work with fresh eyes...'
                ],
                'evaluation-title': 'Prepare to Evaluate',
                'evaluation-subtitle': 'AI has completed the task. Review the results with a fresh perspective',
                'continue-btn': 'Continue',
                'complete-title': 'Experience Complete',
                'complete-subtitle': 'You\'ve experienced the complete AI collaboration meditation flow',
                'value-list': [
                    'Combat digital fatigue, create necessary recovery time',
                    'Improve judgment quality, reduce errors and rework',
                    'Protect cognitive resources, maintain focus throughout the day',
                    'Transform AI tools from replacements to true collaboration partners'
                ],
                'restart-btn': 'Confirm',
                'checklist': {
                    email: [
                        { title: 'Intent & Content Alignment', desc: 'Does this email accurately convey the core message I want to communicate?' },
                        { title: 'Tone & Recipient Match', desc: 'Is the wording and tone appropriate for the recipient?' },
                        { title: 'Key Information Completeness', desc: 'Are all necessary details included without inappropriate content?' }
                    ],
                    report: [
                        { title: 'Data Accuracy & Completeness', desc: 'Are all numbers and charts accurate and up-to-date?' },
                        { title: 'Logical Structure', desc: 'Is the argument flow logical and well-supported?' },
                        { title: 'Executive Summary Clarity', desc: 'Are key insights clearly communicated?' }
                    ],
                    code: [
                        { title: 'Code Quality', desc: 'Is the code readable and properly commented?' },
                        { title: 'Error Handling', desc: 'Are all potential errors handled?' },
                        { title: 'Performance & Security', desc: 'Is the code efficient and secure?' }
                    ],
                    analysis: [
                        { title: 'Data Source Reliability', desc: 'Are the data sources reliable and appropriate?' },
                        { title: 'Analysis Method', desc: 'Are the methods suitable for the problem?' },
                        { title: 'Insight Actionability', desc: 'Are the insights actionable and valuable?' }
                    ]
                }
            },
            zh: {
                'main-title': 'AI协作冥想系统',
                'main-subtitle': '将等待时间转化为恢复时间',
                'task-title': '选择您的任务',
                'task-email': '邮件撰写',
                'task-email-duration': '冥想: 3分钟',
                'task-report': '报告生成',
                'task-report-duration': '冥想: 6分钟',
                'task-code': '代码生成',
                'task-code-duration': '冥想: 5分钟',
                'task-analysis': '数据分析',
                'task-analysis-duration': '冥想: 10分钟',
                'flow-title': '体验流程',
                'selected-task': '已选任务',
                'feature-list': [
                    'AI开始处理任务',
                    '通过适时冥想对抗数字疲劳',
                    '从"被动接收"转为"主动评估"',
                    '物理确认强化注意力回归'
                ],
                'start-btn': '开始体验',
                'meditation-title': '呼吸练习',
                'breath-inhale': '吸气...',
                'breath-hold': '保持...',
                'breath-exhale': '呼气...',
                'meditation-guides': [
                    '将注意力放在呼吸上，随着圆圈的节奏...',
                    '注意您的肩膀，让它们轻轻下沉...',
                    '如果有想法浮现，温和地觉察它...',
                    '感受身体与椅子的接触点...',
                    '准备以全新的视角看待AI的成果...'
                ],
                'evaluation-title': '准备评估',
                'evaluation-subtitle': 'AI已完成任务。请以全新视角审视结果',
                'continue-btn': '继续',
                'complete-title': '体验完成',
                'complete-subtitle': '您已体验了完整的AI协作冥想流程',
                'value-list': [
                    '对抗数字疲劳，创造必要的恢复时间',
                    '提升判断质量，减少错误和返工',
                    '保护认知资源，维持工作日的持续专注',
                    '将AI工具从替代品变为真正的协作伙伴'
                ],
                'restart-btn': '确认',
                'checklist': {
                    email: [
                        { title: '意图与内容对齐', desc: '这份邮件是否准确传达了我想表达的核心信息？' },
                        { title: '语气与接收者匹配', desc: '措辞和语气是否适合收件人？' },
                        { title: '关键信息完整性', desc: '是否包含所有必要信息？' }
                    ],
                    report: [
                        { title: '数据准确性', desc: '所有数字和图表是否准确且最新？' },
                        { title: '逻辑结构', desc: '论证流程是否合理？' },
                        { title: '摘要清晰度', desc: '关键洞察是否清晰传达？' }
                    ],
                    code: [
                        { title: '代码质量', desc: '代码是否易读且有适当注释？' },
                        { title: '错误处理', desc: '是否处理了所有潜在错误？' },
                        { title: '性能与安全', desc: '代码是否高效且安全？' }
                    ],
                    analysis: [
                        { title: '数据源可靠性', desc: '数据源是否可靠且合适？' },
                        { title: '分析方法', desc: '方法是否适合问题？' },
                        { title: '洞察可操作性', desc: '洞察是否可执行且有价值？' }
                    ]
                }
            }
        };

        // 任务配置
        const taskConfig = {
            email: {
                duration: 180, // 3分钟
                progressSpeed: 100 / 180,
                icon: '📧',
                title: 'Email Processing',
                titleJa: 'メール作成中',
                titleEn: 'Email Processing',
                titleZh: '邮件处理中',
                animation: ['📧', '✍️', '📝', '📤'],
                resultTitle: 'Email Generated',
                resultTitleJa: 'メール生成完了',
                resultTitleEn: 'Email Generated',
                resultTitleZh: '邮件生成完成',
                resultDesc: 'Your professional email has been crafted and is ready for review.',
                resultDescJa: 'プロフェッショナルなメールが作成され、確認の準備ができました。',
                resultDescEn: 'Your professional email has been crafted and is ready for review.',
                resultDescZh: '您的专业邮件已制作完成，可供审阅。'
            },
            report: {
                duration: 360, // 6分钟
                progressSpeed: 100 / 360,
                icon: '📋',
                title: 'Report Generation',
                titleJa: 'レポート生成中',
                titleEn: 'Report Generation',
                titleZh: '报告生成中',
                animation: ['📋', '📊', '📈', '📄'],
                resultTitle: 'Report Completed',
                resultTitleJa: 'レポート完成',
                resultTitleEn: 'Report Completed',
                resultTitleZh: '报告完成',
                resultDesc: 'Comprehensive report with data analysis and insights has been generated.',
                resultDescJa: 'データ分析と洞察を含む包括的なレポートが生成されました。',
                resultDescEn: 'Comprehensive report with data analysis and insights has been generated.',
                resultDescZh: '包含数据分析和洞察的综合报告已生成。'
            },
            code: {
                duration: 300, // 5分钟
                progressSpeed: 100 / 300,
                icon: '⚙️',
                title: 'Code Generation',
                titleJa: 'コード生成中',
                titleEn: 'Code Generation',
                titleZh: '代码生成中',
                animation: ['⚙️', '💻', '🔧', '✅'],
                resultTitle: 'Code Generated',
                resultTitleJa: 'コード生成完了',
                resultTitleEn: 'Code Generated',
                resultTitleZh: '代码生成完成',
                resultDesc: 'Clean, efficient code has been generated according to your specifications.',
                resultDescJa: '仕様に従って、クリーンで効率的なコードが生成されました。',
                resultDescEn: 'Clean, efficient code has been generated according to your specifications.',
                resultDescZh: '根据您的规格生成了清洁、高效的代码。'
            },
            analysis: {
                duration: 600, // 10分钟
                progressSpeed: 100 / 600,
                icon: '📊',
                title: 'Data Analysis',
                titleJa: 'データ分析中',
                titleEn: 'Data Analysis',
                titleZh: '数据分析中',
                animation: ['📊', '📈', '🔍', '💡'],
                resultTitle: 'Analysis Complete',
                resultTitleJa: '分析完了',
                resultTitleEn: 'Analysis Complete',
                resultTitleZh: '分析完成',
                resultDesc: 'Detailed data analysis with actionable insights and recommendations.',
                resultDescJa: '実行可能な洞察と推奨事項を含む詳細なデータ分析。',
                resultDescEn: 'Detailed data analysis with actionable insights and recommendations.',
                resultDescZh: '详细的数据分析，包含可操作的洞察和建议。'
            }
        };

        // 全局变量
        let currentLanguage = 'ja';
        let selectedTask = null;
        let currentScreen = 'welcome';
        let previousScreen = null;
        let meditationTimer = null;
        let breathTimer = null;
        let spacePressed = false;
        let countdownTimer = null;
        let isMaximized = false;
        let taskWindowMaximized = false;
        let taskAnimationTimer = null;
        let taskProgressTimer = null;

        // Windows应用控制
        function openApp() {
            document.getElementById('app-window').classList.add('active');
            document.getElementById('taskbar-app').style.display = 'flex';
        }

        function closeApp() {
            document.getElementById('app-window').classList.remove('active');
            document.getElementById('taskbar-app').style.display = 'none';
            document.getElementById('completion-dialog').classList.remove('active');
            location.reload(); // 重置应用状态
        }

        function minimizeApp() {
            document.getElementById('app-window').classList.remove('active');
        }

        function maximizeApp() {
            const appWindow = document.getElementById('app-window');
            if (!isMaximized) {
                appWindow.style.width = '100%';
                appWindow.style.height = 'calc(100% - 48px)';
                appWindow.style.maxWidth = 'none';
                appWindow.style.maxHeight = 'none';
                appWindow.style.top = '0';
                appWindow.style.left = '0';
                appWindow.style.transform = 'none';
                appWindow.style.borderRadius = '0';
                isMaximized = true;
            } else {
                appWindow.style.width = '90%';
                appWindow.style.height = '80%';
                appWindow.style.maxWidth = '900px';
                appWindow.style.maxHeight = '600px';
                appWindow.style.top = '50%';
                appWindow.style.left = '50%';
                appWindow.style.transform = 'translate(-50%, -50%)';
                appWindow.style.borderRadius = '8px 8px 0 0';
                isMaximized = false;
            }
        }

        function focusApp() {
            document.getElementById('app-window').classList.add('active');
        }

        // 更新任务栏时间
        function updateTaskbarTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('taskbar-time').innerHTML = `${hours}:${minutes}<br>${now.toLocaleDateString()}`;
        }
        setInterval(updateTaskbarTime, 1000);
        updateTaskbarTime();

        // 任务窗口控制
        function openTaskWindow() {
            document.getElementById('task-window').classList.add('active');
            document.getElementById('taskbar-task').style.display = 'flex';
        }

        function closeTaskWindow() {
            document.getElementById('task-window').classList.remove('active');
            document.getElementById('taskbar-task').style.display = 'none';
            clearInterval(taskAnimationTimer);
            clearInterval(taskProgressTimer);
            
            // 同時關閉AI協助冥想系統
            closeApp();
        }

        function minimizeTaskWindow() {
            document.getElementById('task-window').classList.remove('active');
        }

        function maximizeTaskWindow() {
            const taskWindow = document.getElementById('task-window');
            if (!taskWindowMaximized) {
                taskWindow.style.width = '100%';
                taskWindow.style.height = 'calc(100% - 48px)';
                taskWindow.style.top = '0';
                taskWindow.style.right = '0';
                taskWindow.style.borderRadius = '0';
                taskWindowMaximized = true;
            } else {
                taskWindow.style.width = '400px';
                taskWindow.style.height = '300px';
                taskWindow.style.top = '10%';
                taskWindow.style.right = '5%';
                taskWindow.style.borderRadius = '8px 8px 0 0';
                taskWindowMaximized = false;
            }
        }

        function focusTaskWindow() {
            document.getElementById('task-window').classList.add('active');
        }

        // 窗口拖拽功能
        let isDragging = false;
        let currentWindow = null;
        let dragOffset = { x: 0, y: 0 };

        function initWindowDragging() {
            // 主应用窗口拖拽
            const appTitlebar = document.querySelector('#app-window .window-titlebar');
            const appWindow = document.getElementById('app-window');

            appTitlebar.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('window-control')) return;
                startDrag(e, appWindow);
            });

            // 任务窗口拖拽
            const taskTitlebar = document.querySelector('#task-window .window-titlebar');
            const taskWindow = document.getElementById('task-window');

            taskTitlebar.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('window-control')) return;
                startDrag(e, taskWindow);
            });

            // 全局鼠标事件
            document.addEventListener('mousemove', handleDrag);
            document.addEventListener('mouseup', stopDrag);
        }

        function startDrag(e, window) {
            isDragging = true;
            currentWindow = window;

            const rect = window.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;

            window.style.transition = 'none';
            e.preventDefault();
        }

        function handleDrag(e) {
            if (!isDragging || !currentWindow) return;

            const x = e.clientX - dragOffset.x;
            const y = e.clientY - dragOffset.y;

            // 限制窗口不超出屏幕边界
            const maxX = window.innerWidth - currentWindow.offsetWidth;
            const maxY = window.innerHeight - currentWindow.offsetHeight - 48; // 减去任务栏高度

            const constrainedX = Math.max(0, Math.min(x, maxX));
            const constrainedY = Math.max(0, Math.min(y, maxY));

            currentWindow.style.left = constrainedX + 'px';
            currentWindow.style.top = constrainedY + 'px';
            currentWindow.style.right = 'auto';
            currentWindow.style.transform = 'none';
        }

        function stopDrag() {
            if (isDragging && currentWindow) {
                currentWindow.style.transition = '';
                isDragging = false;
                currentWindow = null;
            }
        }

        // 返回上一页
        function goBack() {
            if (previousScreen) {
                clearInterval(meditationTimer);
                clearInterval(breathTimer);
                clearInterval(countdownTimer);

                if (previousScreen === 'welcome') {
                    selectedTask = null;
                    document.querySelectorAll('.task-card').forEach(card => card.classList.remove('selected'));
                }

                switchScreen(previousScreen);
            }
        }

        // 语言切换
        function changeLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateUILanguage();
        }

        function updateUILanguage() {
            const t = translations[currentLanguage];

            document.getElementById('main-title').textContent = t['main-title'];
            document.getElementById('main-subtitle').textContent = t['main-subtitle'];
            document.getElementById('task-title').textContent = t['task-title'];
            document.getElementById('flow-title').textContent = t['flow-title'];
            document.getElementById('start-btn').textContent = t['start-btn'];
            document.getElementById('meditation-title').textContent = t['meditation-title'];
            document.getElementById('evaluation-title').textContent = t['evaluation-title'];
            document.getElementById('evaluation-subtitle').textContent = t['evaluation-subtitle'];
            document.getElementById('continue-btn').textContent = t['continue-btn'];
            document.getElementById('complete-title').textContent = t['complete-title'];
            document.getElementById('complete-subtitle').textContent = t['complete-subtitle'];
            document.getElementById('restart-btn').textContent = t['restart-btn'];

            document.querySelectorAll('[data-i18n]').forEach(elem => {
                const key = elem.getAttribute('data-i18n');
                if (t[key]) {
                    elem.textContent = t[key];
                }
            });

            const featureList = document.getElementById('feature-list');
            if (featureList) {
                featureList.innerHTML = '';
                t['feature-list'].forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    featureList.appendChild(li);
                });
            }

            const valueList = document.getElementById('value-list');
            if (valueList) {
                valueList.innerHTML = '';
                t['value-list'].forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    valueList.appendChild(li);
                });
            }
        }

        // 任务选择
        function selectTask(task) {
            selectedTask = task;
            document.querySelectorAll('.task-card').forEach(card => card.classList.remove('selected'));
            event.target.closest('.task-card').classList.add('selected');

            setTimeout(() => {
                showFlowScreen();
            }, 300);
        }

        // 显示流程说明
        function showFlowScreen() {
            const t = translations[currentLanguage];
            const taskNames = {
                email: t['task-email'],
                report: t['task-report'],
                code: t['task-code'],
                analysis: t['task-analysis']
            };

            document.getElementById('selected-task-display').textContent =
                `${t['selected-task']}: ${taskNames[selectedTask]}`;

            switchScreen('flow-screen');
        }

        // 屏幕切换
        function switchScreen(screenId) {
            previousScreen = currentScreen;
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const screen = document.getElementById(screenId);
            if (screen) {
                screen.classList.add('active');
            }
            currentScreen = screenId;
        }

        // 开始演示
        function startDemo() {
            if (!selectedTask) return;
            switchScreen('meditation');
            startSimpleMeditation();
            startTaskProcessing();
        }

        // 开始任务处理
        function startTaskProcessing() {
            const config = taskConfig[selectedTask];
            const taskWindow = document.getElementById('task-window');
            const taskAnimation = document.getElementById('task-animation');
            const taskStatus = document.getElementById('task-status');
            const taskProgressBar = document.getElementById('task-progress-bar');
            const taskProgress = document.querySelector('.task-progress');
            const taskResult = document.getElementById('task-result');

            // 设置窗口标题和任务栏
            const titleKey = `title${currentLanguage.charAt(0).toUpperCase() + currentLanguage.slice(1)}`;
            document.getElementById('task-window-title').textContent = config[titleKey];
            document.getElementById('taskbar-task-icon').textContent = config.icon;
            document.getElementById('taskbar-task-name').textContent = config[titleKey];

            // 显示任务窗口
            openTaskWindow();

            // 重置状态
            taskResult.classList.remove('active');
            taskProgressBar.style.width = '0%';
            
            // 重新显示进度条和状态文字
            taskProgress.style.display = 'block';
            taskStatus.style.display = 'block';

            // 动画效果
            let animationIndex = 0;
            taskAnimationTimer = setInterval(() => {
                taskAnimation.textContent = config.animation[animationIndex % config.animation.length];
                animationIndex++;
            }, 1000);

            // 进度条动画 (15秒)
            let progress = 0;
            taskProgressTimer = setInterval(() => {
                progress += 100 / 150; // 15秒 = 150个100ms
                taskProgressBar.style.width = Math.min(progress, 100) + '%';

                if (progress >= 100) {
                    clearInterval(taskProgressTimer);
                    clearInterval(taskAnimationTimer);
                    showTaskResult();
                }
            }, 100);

            // 更新状态文本
            const statusTexts = {
                ja: '処理中...',
                en: 'Processing...',
                zh: '处理中...'
            };
            taskStatus.textContent = statusTexts[currentLanguage];
        }

        // 显示任务结果
        function showTaskResult() {
            const config = taskConfig[selectedTask];
            const taskResult = document.getElementById('task-result');
            const taskProgress = document.querySelector('.task-progress');
            const taskStatus = document.getElementById('task-status');

            // 设置结果内容
            const titleKey = `resultTitle${currentLanguage.charAt(0).toUpperCase() + currentLanguage.slice(1)}`;
            const descKey = `resultDesc${currentLanguage.charAt(0).toUpperCase() + currentLanguage.slice(1)}`;

            document.getElementById('result-title').textContent = config[titleKey];
            document.getElementById('result-description').textContent = config[descKey];

            // 隐藏进度条和状态文字
            taskProgress.style.display = 'none';
            taskStatus.style.display = 'none';

            // 显示结果
            taskResult.classList.add('active');
        }

        // 简化的6秒冥想
        function startSimpleMeditation() {
            let elapsed = 0;
            const demoTime = 6;
            const countdownDisplay = document.getElementById('countdown-current');
            const countdownTotal = document.getElementById('countdown-total');
            const progressFill = document.getElementById('progress-fill');
            const progressPercent = document.getElementById('progress-percent');

            const actualDuration = taskConfig[selectedTask].duration;
            const minutes = Math.floor(actualDuration / 60);
            const seconds = actualDuration % 60;

            const totalTimeText = {
                ja: seconds > 0 ? `/ ${minutes}分${seconds}秒` : `/ ${minutes}分`,
                en: seconds > 0 ? `/ ${minutes}min ${seconds}s` : `/ ${minutes}min`,
                zh: seconds > 0 ? `/ ${minutes}分${seconds}秒` : `/ ${minutes}分钟`
            };

            countdownTotal.textContent = totalTimeText[currentLanguage];

            startBreathingAnimation();
            updateMeditationGuide();

            const updateProgress = () => {
                if (elapsed <= demoTime) {
                    // 更新时间显示
                    const secondText = {
                        ja: `${elapsed}秒`,
                        en: `${elapsed}s`,
                        zh: `${elapsed}秒`
                    };
                    countdownDisplay.textContent = secondText[currentLanguage];

                    // 计算相对于实际任务时长的进度
                    const actualProgress = (elapsed / actualDuration) * 100;

                    // 更新Windows风格进度条
                    if (progressFill) {
                        progressFill.style.width = actualProgress + '%';
                    }
                    if (progressPercent) {
                        progressPercent.textContent = Math.round(actualProgress) + '%';
                    }

                    if (elapsed === demoTime) {
                        setTimeout(() => {
                            clearInterval(breathTimer);
                            clearInterval(countdownTimer);
                            finishMeditation();
                        }, 500);
                    }

                    elapsed++;
                } else {
                    clearInterval(countdownTimer);
                }
            };

            // 立即显示初始状态
            updateProgress();

            // 每秒更新一次
            countdownTimer = setInterval(updateProgress, 1000);
        }

        // 呼吸动画
        function startBreathingAnimation() {
            const breathText = document.getElementById('breath-text');
            const t = translations[currentLanguage];
            let phase = 0;
            const phases = [t['breath-inhale'], t['breath-hold'], t['breath-exhale'], t['breath-hold']];

            breathTimer = setInterval(() => {
                if (currentScreen !== 'meditation') {
                    clearInterval(breathTimer);
                    return;
                }
                breathText.textContent = phases[phase];
                phase = (phase + 1) % 4;
            }, 2000);
        }

        // 更新冥想引导
        function updateMeditationGuide() {
            const t = translations[currentLanguage];
            const guides = t['meditation-guides'];
            let guideIndex = 0;
            const guideElement = document.getElementById('meditation-guide');

            const guideInterval = setInterval(() => {
                if (currentScreen !== 'meditation') {
                    clearInterval(guideInterval);
                    return;
                }

                guideIndex = (guideIndex + 1) % guides.length;
                guideElement.style.opacity = '0';
                setTimeout(() => {
                    guideElement.textContent = guides[guideIndex];
                    guideElement.style.opacity = '1';
                }, 300);
            }, 2000);
        }

        // 完成冥想
        function finishMeditation() {
            clearInterval(breathTimer);
            clearInterval(countdownTimer);
            generateChecklist();
            switchScreen('evaluation');
        }

        // 生成评估清单
        function generateChecklist() {
            const t = translations[currentLanguage];
            const container = document.getElementById('checklist-container');
            container.innerHTML = '';

            const checklistItems = t['checklist'][selectedTask];

            checklistItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'checklist-item';
                div.onclick = () => toggleCheck(div);

                div.innerHTML = `
                    <div class="check-circle"></div>
                    <div class="checklist-text">
                        <div class="checklist-title">${item.title}</div>
                        <div class="checklist-desc">${item.desc}</div>
                    </div>
                `;

                container.appendChild(div);
            });
        }

        // 切换检查项
        function toggleCheck(item) {
            item.classList.toggle('checked');
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        // 继续到完成
        function proceedToComplete() {
            // 直接显示完成对话框
            document.getElementById('completion-dialog').classList.add('active');
        }

        // 确认并显示任务窗口
        function confirmAndShowTask() {
            // 隐藏完成对话框
            document.getElementById('completion-dialog').classList.remove('active');

            // 关闭AI协助冥想系统窗口
            document.getElementById('app-window').classList.remove('active');
            document.getElementById('taskbar-app').classList.remove('active');

            // 将任务窗口移动到中央并显示
            const taskWindow = document.getElementById('task-window');
            taskWindow.style.top = '50%';
            taskWindow.style.left = '50%';
            taskWindow.style.right = 'auto';
            taskWindow.style.transform = 'translate(-50%, -50%)';

            // 确保任务窗口显示并聚焦
            taskWindow.classList.add('active');
            document.getElementById('taskbar-task').classList.add('active');
        }



        // 初始化
        updateUILanguage();
        initWindowDragging();
    </script>
</body>

</html>